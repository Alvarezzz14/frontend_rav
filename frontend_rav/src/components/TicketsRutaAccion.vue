<template>
	<div class="p-5 rounded-md">
		<table class="w-full border-separate">
			<thead>
				<tr class="text-left text-gray-700">
					<th class="">
						<svg
							width="26"
							height="27"
							viewBox="0 0 26 27"
							fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<path
								d="M6.04409 0.011822C5.32067 0.0981309 4.8342 0.672478 4.78398 1.38178C4.68198 2.84746 4.83106 4.47949 4.82635 5.95301C5.24534 7.44851 7.39208 7.32768 7.63532 5.78981C7.5647 4.35081 7.75772 2.77214 7.64473 1.34883C7.58196 0.556353 6.84284 -0.0839025 6.04409 0.0102527V0.011822ZM19.5522 0.011822C18.8586 0.101269 18.347 0.658355 18.2921 1.3504C18.1838 2.71721 18.3769 4.22527 18.2921 5.60621C18.449 7.45008 21.0148 7.47048 21.1529 5.67055C21.2643 4.21428 21.1011 2.56657 21.1105 1.09931C20.9347 0.427674 20.2537 -0.0791947 19.5522 0.0102527V0.011822ZM22.0615 2.61678V5.96086C22.0615 6.47871 21.4165 7.22725 20.9865 7.48461C19.5616 8.33671 17.4824 7.37005 17.4824 5.66898V2.56814L8.55019 2.5493C8.51724 2.57284 8.52194 2.61207 8.51881 2.6466C8.32422 4.26921 9.13081 6.4897 7.39365 7.49716C6.05194 8.27551 4.10763 7.49088 3.94129 5.89652C3.83772 4.89691 4.06526 3.66034 3.94286 2.67955C3.93815 2.64503 3.94443 2.60423 3.91148 2.58226C3.64941 2.52577 3.38107 2.53047 3.11273 2.53361C2.71884 2.53989 2.09899 2.53989 1.73492 2.64974C0.889095 2.90239 0.256686 3.63209 0.0605293 4.48262C-0.0226411 11.0703 -0.00851786 17.68 0.052683 24.2678C0.292779 25.349 1.20765 26.0912 2.30142 26.176H23.7029C24.8029 26.074 25.7414 25.3035 25.9563 24.2081C26.016 17.6565 26.0128 11.0876 25.9563 4.53441C25.7288 3.55833 24.9316 2.72506 23.9195 2.57755C23.6025 2.53204 23.2729 2.57441 22.9528 2.5697C22.81 2.56814 22.1101 2.45515 22.0615 2.61678Z"
								fill="white" />
							<path
								d="M22.0612 2.61672C22.1098 2.45509 22.8097 2.56807 22.9525 2.56964C23.2726 2.57435 23.6022 2.53041 23.9192 2.57749C24.9314 2.725 25.7285 3.55984 25.9561 4.53435C26.0126 11.0876 26.0141 17.6564 25.9561 24.2081C25.7411 25.3034 24.8027 26.0755 23.7026 26.1759H2.29958C1.20581 26.0912 0.29094 25.3489 0.050844 24.2677C-0.0103569 17.68 -0.0260494 11.0687 0.0586903 4.48256C0.254847 3.6336 0.887256 2.90233 1.73308 2.64968C2.09715 2.5414 2.71701 2.53983 3.11089 2.53355C3.37923 2.52884 3.64757 2.52414 3.90964 2.5822C3.94416 2.60574 3.93788 2.64497 3.94102 2.67949C4.06342 3.66027 3.83588 4.89685 3.93945 5.89646C4.10579 7.49082 6.0501 8.27545 7.39181 7.4971C9.12897 6.48964 8.32238 4.26915 8.51696 2.64654C8.52167 2.61201 8.51696 2.57121 8.54835 2.54924L17.4805 2.56807V5.66892C17.4805 7.36999 19.5598 8.33665 20.9847 7.48455C21.4147 7.22719 22.0596 6.47865 22.0596 5.9608V2.61672H22.0612ZM2.1709 8.86863L2.12226 8.91727V23.8864C2.12226 23.8958 2.20386 24.0355 2.21798 24.0512C2.30429 24.139 2.7327 24.0888 2.88648 24.0967C3.37609 24.1202 3.79665 24.0967 4.28155 24.0982C10.6339 24.1265 16.9862 24.1265 23.3448 24.0967C23.4704 24.0967 23.6383 24.1626 23.7685 24.0684C23.7858 24.0559 23.88 23.8974 23.88 23.8879V8.91884L23.8313 8.8702H2.1709V8.86863Z"
								fill="#010101" />
							<path
								d="M6.04392 0.0116543C6.84267 -0.0825009 7.58179 0.557755 7.64456 1.35023C7.75755 2.77354 7.56453 4.35221 7.63514 5.79121C7.39191 7.32908 5.24517 7.44991 4.82618 5.95442C4.83089 4.47932 4.68181 2.84886 4.78381 1.38318C4.83403 0.67231 5.3205 0.0979633 6.04392 0.0132236V0.0116543Z"
								fill="#010101" />
							<path
								d="M19.5524 0.0119617C20.2538 -0.0774857 20.9349 0.429383 21.1106 1.10102C21.1012 2.56828 21.2644 4.21442 21.153 5.67226C21.0165 7.47219 18.4492 7.45179 18.2922 5.60792C18.377 4.22541 18.184 2.71892 18.2922 1.3521C18.3472 0.660064 18.8587 0.102978 19.5524 0.013531V0.0119617Z"
								fill="#010101" />
							<path
								d="M11.9222 11.8973C12.1874 11.8879 12.4134 11.9192 12.6582 11.9208C13.2796 11.9271 13.9199 11.8565 14.5429 11.9208C14.8662 11.9538 15.1094 12.2362 15.1439 12.5532C15.1926 13.0067 15.191 14.0785 15.1455 14.5368C15.1047 14.9526 14.8159 15.1723 14.4142 15.2021C13.6217 15.2617 12.28 15.2633 11.4891 15.2021C11.136 15.1739 10.8363 14.9353 10.7908 14.5681C10.7453 14.2009 10.7422 12.8074 10.8065 12.4716C10.9163 11.891 11.4577 11.913 11.9222 11.8988V11.8973Z"
								fill="#010101" />
							<path
								d="M14.9383 17.8749C15.0372 17.9738 15.1298 18.1621 15.1455 18.3018C15.1941 18.7286 15.1973 19.9259 15.1455 20.3481C15.1125 20.6133 14.8489 20.9161 14.5774 20.9491C13.5935 21.0699 12.3711 20.8565 11.3605 20.9491C11.056 20.8926 10.8253 20.6196 10.7924 20.3151C10.7469 19.8883 10.7406 18.7223 10.7924 18.3002C10.8316 17.9769 11.1266 17.6866 11.4577 17.6662C12.4323 17.7337 13.5182 17.5799 14.4801 17.6662C14.6402 17.6803 14.8254 17.7619 14.9383 17.8734V17.8749Z"
								fill="#010101" />
							<path
								d="M17.43 15.0233C17.3108 14.926 17.2574 14.7769 17.2339 14.6263C17.3155 13.953 17.1962 13.2186 17.2543 12.5517C17.2857 12.1845 17.5807 11.9052 17.9526 11.8926C18.6917 11.8691 19.4528 11.8926 20.1919 11.8848C20.6815 11.8801 21.4944 11.833 21.5744 12.4858C21.6545 13.1386 21.5132 13.9562 21.5744 14.631C21.485 14.995 21.2418 15.1708 20.8761 15.199C20.0899 15.2602 18.7388 15.2587 17.951 15.199C17.7486 15.1833 17.5885 15.1504 17.43 15.0217V15.0233Z"
								fill="#010101" />
							<path
								d="M5.10215 11.8956C5.47093 11.8486 5.91189 11.9239 6.29635 11.9208C6.59922 11.9192 6.90208 11.9208 7.20338 11.9208C7.77773 11.9239 8.67691 11.7246 8.74753 12.5516C8.7899 13.0428 8.80088 14.1193 8.74753 14.5979C8.70516 14.973 8.40072 15.1707 8.05078 15.1989C7.10452 15.2774 6.05312 15.1377 5.09587 15.1974C4.77732 15.1785 4.41168 14.9463 4.40383 14.5979C4.40383 14.5493 4.43208 14.4943 4.43208 14.4363C4.42737 13.8682 4.35989 12.9863 4.43208 12.4574C4.47759 12.131 4.80085 11.9333 5.10372 11.8941L5.10215 11.8956Z"
								fill="#010101" />
							<path
								d="M17.8305 17.6755C18.8159 17.7399 19.9741 17.5625 20.9407 17.6677C21.253 17.7006 21.5449 17.9501 21.5747 18.2671C21.6218 18.7536 21.6249 19.896 21.5747 20.3794C21.5417 20.6854 21.2781 20.9192 20.9752 20.949C19.9584 20.8768 18.8254 21.0384 17.8226 20.949C17.5276 20.9223 17.2341 20.6916 17.2263 20.3762C17.2247 20.3134 17.2577 20.2522 17.2577 20.1863C17.2545 19.6214 17.1871 18.7677 17.2577 18.2389C17.2969 17.947 17.5558 17.7336 17.8305 17.6755Z"
								fill="#010101" />
							<path
								d="M4.56845 20.7416C4.48215 20.6522 4.40368 20.4717 4.40211 20.3462C4.39113 19.7797 4.36759 18.8067 4.42722 18.2685C4.46645 17.9232 4.7599 17.6973 5.09102 17.6659C6.04983 17.578 7.13889 17.7334 8.11183 17.6659C8.43039 17.7098 8.70815 17.9342 8.74424 18.2669C8.79602 18.7283 8.79445 19.9131 8.74424 20.3776C8.71442 20.6569 8.47746 20.8923 8.20912 20.9472C7.17812 20.8703 6.00432 21.0476 4.99215 20.9472C4.8572 20.9346 4.65947 20.8374 4.56689 20.7401L4.56845 20.7416Z"
								fill="#010101" />
						</svg>
						<span>FECHA</span>
					</th>
					<th class="">
						<svg
							width="26"
							height="27"
							viewBox="0 0 26 27"
							fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<path
								d="M6.04409 0.011822C5.32067 0.0981309 4.8342 0.672478 4.78398 1.38178C4.68198 2.84746 4.83106 4.47949 4.82635 5.95301C5.24534 7.44851 7.39208 7.32768 7.63532 5.78981C7.5647 4.35081 7.75772 2.77214 7.64473 1.34883C7.58196 0.556353 6.84284 -0.0839025 6.04409 0.0102527V0.011822ZM19.5522 0.011822C18.8586 0.101269 18.347 0.658355 18.2921 1.3504C18.1838 2.71721 18.3769 4.22527 18.2921 5.60621C18.449 7.45008 21.0148 7.47048 21.1529 5.67055C21.2643 4.21428 21.1011 2.56657 21.1105 1.09931C20.9347 0.427674 20.2537 -0.0791947 19.5522 0.0102527V0.011822ZM22.0615 2.61678V5.96086C22.0615 6.47871 21.4165 7.22725 20.9865 7.48461C19.5616 8.33671 17.4824 7.37005 17.4824 5.66898V2.56814L8.55019 2.5493C8.51724 2.57284 8.52194 2.61207 8.51881 2.6466C8.32422 4.26921 9.13081 6.4897 7.39365 7.49716C6.05194 8.27551 4.10763 7.49088 3.94129 5.89652C3.83772 4.89691 4.06526 3.66034 3.94286 2.67955C3.93815 2.64503 3.94443 2.60423 3.91148 2.58226C3.64941 2.52577 3.38107 2.53047 3.11273 2.53361C2.71884 2.53989 2.09899 2.53989 1.73492 2.64974C0.889095 2.90239 0.256686 3.63209 0.0605293 4.48262C-0.0226411 11.0703 -0.00851786 17.68 0.052683 24.2678C0.292779 25.349 1.20765 26.0912 2.30142 26.176H23.7029C24.8029 26.074 25.7414 25.3035 25.9563 24.2081C26.016 17.6565 26.0128 11.0876 25.9563 4.53441C25.7288 3.55833 24.9316 2.72506 23.9195 2.57755C23.6025 2.53204 23.2729 2.57441 22.9528 2.5697C22.81 2.56814 22.1101 2.45515 22.0615 2.61678Z"
								fill="white" />
							<path
								d="M22.0612 2.61672C22.1098 2.45509 22.8097 2.56807 22.9525 2.56964C23.2726 2.57435 23.6022 2.53041 23.9192 2.57749C24.9314 2.725 25.7285 3.55984 25.9561 4.53435C26.0126 11.0876 26.0141 17.6564 25.9561 24.2081C25.7411 25.3034 24.8027 26.0755 23.7026 26.1759H2.29958C1.20581 26.0912 0.29094 25.3489 0.050844 24.2677C-0.0103569 17.68 -0.0260494 11.0687 0.0586903 4.48256C0.254847 3.6336 0.887256 2.90233 1.73308 2.64968C2.09715 2.5414 2.71701 2.53983 3.11089 2.53355C3.37923 2.52884 3.64757 2.52414 3.90964 2.5822C3.94416 2.60574 3.93788 2.64497 3.94102 2.67949C4.06342 3.66027 3.83588 4.89685 3.93945 5.89646C4.10579 7.49082 6.0501 8.27545 7.39181 7.4971C9.12897 6.48964 8.32238 4.26915 8.51696 2.64654C8.52167 2.61201 8.51696 2.57121 8.54835 2.54924L17.4805 2.56807V5.66892C17.4805 7.36999 19.5598 8.33665 20.9847 7.48455C21.4147 7.22719 22.0596 6.47865 22.0596 5.9608V2.61672H22.0612ZM2.1709 8.86863L2.12226 8.91727V23.8864C2.12226 23.8958 2.20386 24.0355 2.21798 24.0512C2.30429 24.139 2.7327 24.0888 2.88648 24.0967C3.37609 24.1202 3.79665 24.0967 4.28155 24.0982C10.6339 24.1265 16.9862 24.1265 23.3448 24.0967C23.4704 24.0967 23.6383 24.1626 23.7685 24.0684C23.7858 24.0559 23.88 23.8974 23.88 23.8879V8.91884L23.8313 8.8702H2.1709V8.86863Z"
								fill="#010101" />
							<path
								d="M6.04392 0.0116543C6.84267 -0.0825009 7.58179 0.557755 7.64456 1.35023C7.75755 2.77354 7.56453 4.35221 7.63514 5.79121C7.39191 7.32908 5.24517 7.44991 4.82618 5.95442C4.83089 4.47932 4.68181 2.84886 4.78381 1.38318C4.83403 0.67231 5.3205 0.0979633 6.04392 0.0132236V0.0116543Z"
								fill="#010101" />
							<path
								d="M19.5524 0.0119617C20.2538 -0.0774857 20.9349 0.429383 21.1106 1.10102C21.1012 2.56828 21.2644 4.21442 21.153 5.67226C21.0165 7.47219 18.4492 7.45179 18.2922 5.60792C18.377 4.22541 18.184 2.71892 18.2922 1.3521C18.3472 0.660064 18.8587 0.102978 19.5524 0.013531V0.0119617Z"
								fill="#010101" />
							<path
								d="M13 11L14.3471 15.1459H18.7063L15.1796 17.7082L16.5267 21.8541L13 19.2918L9.47329 21.8541L10.8204 17.7082L7.29366 15.1459H11.6529L13 11Z"
								fill="#010101" />
						</svg>
						Ticket
					</th>
					<th class="">
						<svg
							width="30"
							height="18"
							viewBox="0 0 30 18"
							fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<path
								d="M3.30191 10.9416C3.12292 10.7223 1.91954 9.17913 1.9397 9.03194C3.32376 6.89725 5.07505 4.97726 7.06248 3.54288C12.3046 -0.238994 18.1408 -0.191182 23.3418 3.65444C25.2645 5.07569 26.962 6.94882 28.3124 9.03101C27.22 10.7794 25.8426 12.3638 24.3233 13.6585C17.2509 19.6857 9.09529 18.0338 3.30107 10.9407L3.30191 10.9416ZM11.2609 14.626C10.6928 14.1957 10.1911 13.5741 9.81463 12.9338C8.23309 10.2404 8.49024 6.67226 10.4188 4.28819C10.6315 4.02476 10.9457 3.78382 11.1348 3.54007C11.176 3.48757 11.2357 3.46319 11.218 3.37601C8.37007 4.43069 5.83809 6.44351 3.95402 9.03101C3.93638 9.14163 5.00951 10.3998 5.16749 10.5713C6.86248 12.4154 8.92134 13.8629 11.1735 14.701L11.2609 14.626ZM18.9921 14.626L19.0795 14.701C21.9098 13.6435 24.4275 11.6382 26.2998 9.06382C24.4477 6.44913 21.8896 4.45319 19.0543 3.37976L18.9921 3.46882C19.1165 3.52976 19.2711 3.67132 19.3711 3.77351C22.1585 6.61694 22.1703 11.4038 19.4131 14.2744C19.3022 14.3907 19.1291 14.551 18.9921 14.626ZM14.908 3.67038C11.0004 3.90101 8.91546 8.89882 11.3273 12.3713C13.5912 15.631 18.2803 14.8669 19.6114 11.0279C20.8291 7.51507 18.603 3.82413 15.2727 3.65726L14.9072 3.67038H14.908Z"
								fill="black" />
							<path
								d="M12.6482 8.01577C12.8398 8.09358 12.9835 8.25577 13.1826 8.33358C14.1457 8.71046 15.0524 7.90139 14.9583 6.77358C14.9381 6.53264 14.8154 6.35358 14.8096 6.13796C15.8785 5.92889 17.0533 6.68171 17.5096 7.77108C18.1533 9.30671 17.5289 11.1386 16.1222 11.7733C13.9868 12.737 11.865 10.4073 12.649 8.01483L12.6482 8.01577Z"
								fill="black" />
						</svg>
						Visualizar
					</th>
				</tr>
			</thead>
			<tbody>
				<tr v-for="(events, date) in groupedEvents" :key="date">
					<td class="py-4 px-2">
						<div class="flex flex-col items-start">
							<time class="text-lg font-bold text-gray-700">{{ date }}</time>
							<button
								@click="toggleGroup(date)"
								class="text-customPurple font-semibold hover:underline cursor-pointer mt-2">
								{{ openedGroups[date] ? "Cerrar" : "Ver más" }}
							</button>
						</div>
					</td>

					<td v-if="openedGroups[date]" class="py-4 px-2">
						<div v-for="(event, index) in events" :key="index">
							<div class="flex items-center space-x-4 mb-4">
								<img
									:src="event.profileImage"
									alt="Profile"
									class="w-14 h-14 rounded-full" />
								<div>
									<p class="font-semibold text-customPurple">
										{{ event.title }}
									</p>
									<p class="text-gray-600">{{ event.description }}</p>
								</div>
							</div>
						</div>
					</td>

					<td
						v-else
						colspan="2"
						class="text-customPurple py-4 px-2 text-center">
						<button
							@click.prevent="$emit('showEventDetails', event)"
							class="text-customPurple hover:underline">
							Ver más
						</button>
						Haz click para ver más información.
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</template>

<script setup>
import { ref } from "vue";

const groupedEvents = ref({
	"2024-11-20": [
		{
			title: "Revisión del ticket 12345",
			description: "Pendiente de aprobación",
			profileImage: "https://via.placeholder.com/56",
		},
		{
			title: "Consulta del ticket 12346",
			description: "Ticket cerrado satisfactoriamente",
			profileImage: "https://via.placeholder.com/56",
		},
	],
	"2024-11-21": [
		{
			title: "Actualización del ticket 12347",
			description: "Nuevo comentario agregado",
			profileImage: "https://via.placeholder.com/56",
		},
	],
});

const openedGroups = ref({});
const toggleGroup = (date) => {
	openedGroups.value[date] = !openedGroups.value[date];
};
</script>

<style scoped>
/* Aplicar bordes con espaciado */
table {
	border-collapse: collapse;
	border-spacing: 8px; /* Espacio entre celdas */
	width: 100%;
}

th,
td {
	border: 1px solid #ccc; /* Borde individual para cada celda */
	background-color: #fff; /* Fondo blanco para celdas */
	text-align: left; /* Alinear texto a la izquierda */
}

thead th {
	background-color: #f3f4f6; /* Fondo gris claro para encabezados */
	font-weight: bold;
	padding: 12px;
}

tbody tr:hover td {
	background-color: #f9f9f9; /* Fondo más claro al pasar el cursor */
}

tbody td {
	padding: 10px; /* Espaciado interno en las celdas */
}
</style>
