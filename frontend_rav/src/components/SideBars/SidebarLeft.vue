<template>
	<div class="overflow-y-auto max-h-screen bg-white w-56 md:w-60 lg:w-72">
		<!-- Barra lateral izquierda -->
		<div>
			<!-- Ícono centrado -->
			<div class="py-8 hidden lg:flex items-center h-auto justify-center">
				<img src="@/assets/images/LogosRav/ravLogoAside.png" alt="logo RAV" />
			</div>
			<!-- Menu de navegación -->
			<nav>
				<div class="lg:hidden flex ml-4 pt-4">
					<span class="text-customPurple font-bold"> Menú Principal </span>
				</div>
				<ul class="list-none flex flex-col px-0 border">
					<li
						v-for="item in menuItems"
						:key="item.title"
						class="py-1 md:py-2 relative w-full">
						<router-link
							v-if="item.to"
							:to="item.to"
							@click="setActive(item)"
							class="px-2 h-10 md:h-16 lg:h-20"
							:class="[
								'flex flex-row  items-center transform text-black transition-colors duration-200 ',
								isActive(item) ? 'bg-customPurple text-amarillo' : '',
							]">
							<span
								v-if="item.icon"
								v-html="item.icon"
								:class="{
									'text-GrisIconosDash': !isActive(item),
									'text-amarillo': isActive(item),
								}"
								class="inline-flex items-center justify-center h-6 md:h-9 lg:h-12 w-6 md:w-9 lg:w-12 text-lg mr-4 transition-colors duration-200">
							</span>

							<span
								class="text-left sm:text-md md:text-base lg:text-lg font-sm transition-colors duration-200"
								:class="{ 'text-amarillo': isActive(item) }"
								>{{ item.title }}</span
							>
						</router-link>
					</li>

					<li>
						<div
							class="cursor-pointer flex lg:hidden mt-4 ml-2 gap-1"
							@click="logout">
							<img
								class="w-7 h-auto"
								:src="IconoLogout"
								alt="IconoLogoutResponsive" />
							<span
								class="text-left mt-1 ml-0.5 text-black text-sm md:text-base lg:text-lg font-bold"
								>Cerrar Sesión</span
							>

							<div class="mt-2 ml-16">
								<svg
									width="20"
									height="20"
									viewBox="0 0 12 11"
									fill="none"
									xmlns="http://www.w3.org/2000/svg">
									<path
										d="M7.49999 10.5L7.49999 9.00003L1.49997 9.00002L1.49997 1.5L7.49999 1.5L7.49999 -5.16178e-06L-3.81827e-05 -5.81745e-06L-3.91006e-05 10.5L7.49999 10.5ZM8.99999 7.50002L12 5.25001L8.99999 3.00001L8.99999 4.50001L2.99997 4.50001L2.99997 6.00001L8.99999 6.00001L8.99999 7.50002Z"
										fill="black" />
								</svg>
							</div>
						</div>
					</li>
					<li class="lg:hidden">
						<Notifications />
					</li>
				</ul>
				<!-- Sección inferior con el avatar, nombre y email -->
				<div class="hidden lg:block p-4 border text:sm flex-shrink-0">
					<div class="flex items-center justify-center">
						<Avatar
							:src="user.avatar"
							alt="User Avatar"
							class="w-12 h-12 rounded-full" />
						<div class="text-xs text-center ml-3">
							<p class="font-bold text-lg">{{ user.name }}</p>
						</div>
					</div>
					<p class="text-gray-700 text-sm">{{ user.email }}</p>
					<!-- Botón de Cerrar Sesión -->
					<div class="mt-4 text-center">
						<LogoutButton
							@click="logout"
							class="text-base !text-amarillo !font-bold py-1 px-2" />
					</div>
				</div>
			</nav>
		</div>
	</div>
</template>
<script setup>
import { ref } from "vue";
import RavIcon from "@/components/Icons/RavIcon.vue";
import Avatar from "@/components/Buttons/Avatar.vue";
import LogoutButton from "@/components/Buttons/LogoutButton.vue";
import axios from "axios";
import { useRoute, useRouter } from "vue-router";
import { useToast } from "vue-toastification";
import { watch } from "vue";
import IconoLogout from "@/assets/iconosDash/malecostume-512.svg";
import Notifications from "./Notifications.vue";
import RavLogo from "@/assets/images/ravLogo.png";

const isSidebarOpen = ref(false);
const router = useRouter();
const route = useRoute();
const toast = useToast();
const user = ref({
	name: "Amy Elsner",
	email: "amy.elsner@example.com",
	avatar: "https://primefaces.org/cdn/primevue/images/avatar/amyelsner.png",
});
const menuItems = ref([
	{
		title: "Inicio",
		to: { name: "HomePage" },
		icon: `
		  <svg width="34" height="34" viewBox="0 0 34 34" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
		<path d="M17 0C7.65 0 0 7.65 0 17C0 26.35 7.65 34 17 34C26.35 34 34 26.35 34 17C34 7.65 26.35 0 17 0ZM17 4.25C24.055 4.25 29.75 9.945 29.75 17C29.75 24.055 24.055 29.75 17 29.75C9.945 29.75 4.25 24.055 4.25 17C4.25 9.945 9.945 4.25 17 4.25ZM17 8.5C15.81 8.5 14.875 9.435 14.875 10.625C14.875 11.815 15.81 12.75 17 12.75C18.19 12.75 19.125 11.815 19.125 10.625C19.125 9.435 18.19 8.5 17 8.5ZM9.945 12.75C9.59311 12.863 9.27678 13.0658 9.02722 13.3384C8.77767 13.611 8.60353 13.944 8.52199 14.3045C8.44046 14.6649 8.45434 15.0404 8.56229 15.3939C8.67023 15.7474 8.86849 16.0666 9.1375 16.32L13.005 20.1875C12.92 20.5275 12.75 20.8675 12.75 21.25C12.75 23.5875 14.6625 25.5 17 25.5C19.3375 25.5 21.25 23.5875 21.25 21.25C21.25 18.9125 19.3375 17 17 17C16.6175 17 16.2775 17.17 15.9375 17.255L12.07 13.3875C11.8375 13.1302 11.5455 12.9336 11.2195 12.8151C10.8935 12.6966 10.5435 12.6596 10.2 12.7075C10.1151 12.7024 10.0299 12.7024 9.945 12.7075V12.75ZM23.375 12.75C22.185 12.75 21.25 13.685 21.25 14.875C21.25 16.065 22.185 17 23.375 17C24.565 17 25.5 16.065 25.5 14.875C25.5 13.685 24.565 12.75 23.375 12.75Z" fill="currentColor"/>
		</svg>`,
		submenuOpen: false,
		submenu: [],
	},
	{
		title: "Ruta del Ciudadano",
		to: { name: "BusquedaCiudadanoPage" },
		icon: `<svg width="34" height="39" viewBox="0 0 34 39" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M20.038 31.2135C20.0246 31.2016 20.0237 31.1996 20.0237 31.1817C20.0237 30.9938 20.0313 30.8029 20.0321 30.6141C20.0338 30.2025 20.0447 29.8625 20.1167 29.456C20.4013 27.8416 21.4051 26.4708 22.7111 25.9151C23.6145 26.429 24.6735 26.43 25.576 25.9131C26.903 26.4827 27.9126 27.8863 28.1814 29.5335C28.2667 30.0554 28.2391 30.4838 28.2525 31.0037C28.2542 31.0703 28.2919 31.1588 28.2467 31.2125H20.038V31.2135Z" fill="currentColor"/>
<path d="M24.0159 21.2057C25.8632 21.0991 27.108 23.1023 26.1962 24.7197C25.3792 26.1674 23.3328 26.3333 22.3012 25.0233C21.1178 23.5207 22.1161 21.3153 24.0159 21.2057Z" fill="currentColor"/>
<path d="M19.2876 0V3.14098H25.9131V9.42294H8.24509V3.14098H14.8706V0H19.2876Z" fill="currentColor"/>
<path d="M12.1674 14.7234H27.2821C27.4984 14.7672 27.5947 14.8579 27.6343 14.9884C27.7002 15.1993 27.6963 16.7051 27.6119 16.8802C27.5736 16.9574 27.4879 17.0155 27.3758 17.056L12.1688 17.0791C12.0514 17.0584 11.9314 17.0027 11.8773 16.9367C11.7718 16.8061 11.7507 15.1977 11.8153 14.9884C11.8562 14.8579 11.9525 14.7672 12.1674 14.7234Z" fill="currentColor"/>
<path d="M11.9803 21.7905H19.8175C19.9297 21.8343 19.9796 21.925 20.0001 22.0555C20.0343 22.2664 20.0323 23.7722 19.9885 23.9473C19.9687 24.0245 19.9242 24.0826 19.8661 24.1232L11.9809 24.1463C11.9201 24.1256 11.8579 24.0699 11.8298 24.0038C11.7751 23.8733 11.7642 22.2649 11.7977 22.0555C11.8189 21.925 11.8688 21.8343 11.9803 21.7905Z" fill="currentColor"/>
<path d="M11.9227 28.8577H17.5207C17.6008 28.9014 17.6365 28.9922 17.6511 29.1227C17.6756 29.3336 17.6741 30.8393 17.6428 31.0144C17.6287 31.0916 17.5969 31.1497 17.5554 31.1903L11.9232 31.2134C11.8797 31.1927 11.8352 31.137 11.8152 31.0709C11.7761 30.9404 11.7683 29.332 11.7922 29.1227C11.8074 28.9922 11.843 28.9014 11.9227 28.8577Z" fill="currentColor"/>
<path d="M7.57227 14.1404C9.84248 13.9681 10.1345 17.498 7.83071 17.6619C5.44425 17.8323 5.14258 14.3247 7.57227 14.1404Z" fill="#D9D9D9"/>
<path d="M7.56997 21.2081C9.86846 21.0312 10.1127 24.5666 7.82867 24.7295C5.48498 24.8962 5.10799 21.3971 7.56997 21.2081Z" fill="#D9D9D9"/>
<path d="M7.55712 28.2746C9.42712 28.1307 10.2031 30.8274 8.40877 31.6149C5.8586 32.7339 4.70518 28.4938 7.55712 28.2746Z" fill="#D9D9D9"/>
<path d="M6.71385 4.71143V7.50886H3.35692V35.4832H30.2123V7.50886H26.8554V4.71143H33.5692V38.2807H0V4.71143H6.71385Z" fill="#D9D9D9"/>
</svg>
`,
		submenuOpen: false,
		submenu: [
			{
				title: "Búsqueda del Ciudadano",
				to: { name: "BusquedaCiudadanoPage" },
				icon: `<svg width="34" height="34" viewBox="0 0 34 34" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M11.3215 0.0224217C20.8956 -0.55239 27.2974 10.0419 22.3381 18.337C22.0487 18.8205 21.2592 19.6839 21.0965 20.0591C21.0678 20.1264 21.0295 20.1793 21.063 20.2563L23.4506 22.6614C24.3931 22.1058 25.3285 22.0769 26.2113 22.76C28.3117 25.2348 31.4241 27.5004 33.4146 29.9944C35.2734 32.3249 32.3117 35.2904 30.0294 33.3976C27.5247 31.322 25.2759 28.2796 22.7879 26.115C22.2281 25.3334 22.1778 24.304 22.6874 23.4839L20.2281 20.9297C14.3047 26.6442 4.38142 24.6287 1.0274 17.1225C-2.32662 9.61625 2.90297 0.527487 11.3215 0.0224217ZM11.4077 2.46597C4.06325 2.94699 -0.16158 11.3503 4.01779 17.5169C8.19716 23.6835 16.788 23.1424 20.3429 16.9421C24.1563 10.2945 18.9913 1.97053 11.4077 2.46597Z" />
<path d="M11.6412 4.60523C17.3634 4.25494 18.4664 12.5748 12.8443 13.6738C6.41237 14.9307 5.14647 5.00131 11.6412 4.60523Z"/>
<path d="M15.5669 12.8647C16.6448 13.3353 17.6351 14.4543 18.0937 15.6083C18.3537 16.2641 18.5641 16.6371 18.1221 17.2128C15.47 20.6772 10.4354 21.1704 7.08129 18.557C6.76456 18.3117 5.63945 17.2704 5.52835 16.9425C5.39362 16.5445 6.21618 15.05 6.47383 14.6796C6.74329 14.2891 7.82585 13.1026 8.22059 12.9824C8.45459 12.9123 9.09515 13.5381 9.36461 13.6883C11.369 14.8197 13.9076 14.4993 15.5693 12.8647H15.5669Z" />
</svg>
`,
			},
			{
				title: "Registro de Actividad",
				to: { name: "RegistroActividadPage" },
				icon: `<svg width="38" height="38" viewBox="0 0 38 38" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M0 23.6681V23.4077C0.00727383 23.3956 0.0206094 23.3848 0.0206094 23.3727C0.0815421 22.7965 0.344652 22.26 0.763752 21.8575C1.89524 20.6978 3.02874 19.5422 4.16427 18.3906L6.84831 15.6626L11.3217 11.1168C12.5445 9.87275 13.7673 8.62911 14.9901 7.38588C16.3059 6.04862 17.6216 4.71296 18.9374 3.37892C19.5654 2.74123 20.1849 2.09751 20.8177 1.46705C21.1814 1.10541 21.562 0.743771 21.9524 0.412269C22.2143 0.185641 22.5501 0.0904098 22.881 0H23.4047C23.4108 0.00723279 23.4157 0.0180815 23.4229 0.0192869C23.9854 0.120546 24.4304 0.429144 24.8244 0.818509C25.1678 1.15845 25.5065 1.50281 25.8403 1.85159C26.5604 2.60139 27.2744 3.35481 27.9933 4.1034C28.0215 4.12765 28.0402 4.16107 28.046 4.19771C28.0517 4.23435 28.0442 4.27184 28.0248 4.30351C27.8236 4.78569 27.609 5.26788 27.4393 5.76332C27.2178 6.37396 27.1548 7.03031 27.2562 7.67157C27.409 8.55518 27.9194 9.21819 28.5898 9.77873C29.2222 10.3414 30.0516 10.6344 30.8992 10.5948C31.5095 10.5586 32.1072 10.406 32.6595 10.1452C33.051 9.97039 33.4281 9.76546 33.8184 9.57018C33.8347 9.58196 33.8501 9.59485 33.8645 9.60876C34.4549 10.1789 35.0526 10.7431 35.6345 11.3229C36.2855 11.9703 36.9316 12.6224 37.5608 13.2902C37.7291 13.4722 37.8543 13.6893 37.9271 13.9257C37.9999 14.162 38.0185 14.4116 37.9815 14.656C37.9137 15.2155 37.6573 15.7356 37.2541 16.1315C36.7692 16.6414 36.2697 17.1417 35.7751 17.6444C34.8133 18.6208 33.8524 19.5952 32.8922 20.5676C31.0035 22.4883 29.1139 24.4058 27.2235 26.3201C26.3911 27.1679 25.5582 28.0158 24.7249 28.8636C23.0916 30.5232 21.4578 32.1827 19.8236 33.8422C19.0679 34.6097 18.3127 35.378 17.5578 36.147C17.1468 36.5629 16.748 36.9909 16.3116 37.3802C15.3938 38.1951 14.3719 38.2036 13.4251 37.4224C13.1644 37.2079 12.9268 36.9656 12.6831 36.7305C11.9048 35.9795 11.1326 35.2213 10.3519 34.4715C9.8524 33.9893 9.81239 33.794 10.0912 33.1611C10.5968 32.0147 10.6246 30.8599 10.0233 29.7484C9.32141 28.449 8.20487 27.7739 6.70889 27.8197C6.22397 27.8342 5.74632 27.9776 5.26383 28.0499C4.98191 28.101 4.71388 28.2102 4.47704 28.3706C4.34369 28.455 4.20912 28.537 4.0794 28.6177C4.06724 28.6108 4.0555 28.6031 4.04425 28.5948C2.88044 27.3628 1.71177 26.1345 0.556448 24.894C0.390293 24.7003 0.254221 24.4829 0.152751 24.2491C0.0841048 24.0605 0.0329743 23.866 0 23.6681ZM16.4692 26.1272C16.5104 26.0754 16.5407 26.0392 16.5674 26.0007C17.1602 25.1568 17.7554 24.313 18.3434 23.4632C18.3726 23.4127 18.4158 23.3717 18.4678 23.345C18.5198 23.3183 18.5785 23.307 18.6368 23.3125C19.6393 23.3245 20.6419 23.3293 21.6445 23.3354H21.9088C21.8542 23.2606 21.8227 23.2148 21.7875 23.169C21.1632 22.3457 20.5401 21.5224 19.9109 20.7026C19.88 20.6678 19.8599 20.6247 19.853 20.5788C19.8461 20.5328 19.8527 20.4858 19.8721 20.4435C20.2067 19.4542 20.5385 18.4637 20.8674 17.472C20.8819 17.4298 20.8916 17.3852 20.9062 17.3273L20.8322 17.349C19.8171 17.697 18.8032 18.0466 17.7906 18.3978C17.7476 18.4178 17.6996 18.4248 17.6526 18.418C17.6056 18.4111 17.5617 18.3907 17.5263 18.3592C16.6874 17.7388 15.846 17.1208 15.0023 16.5052C14.9623 16.4763 14.9198 16.4498 14.881 16.4232C14.881 16.6897 14.881 16.9392 14.881 17.1899C14.8932 18.0229 14.9029 18.8559 14.9247 19.6901C14.9295 19.7375 14.9207 19.7854 14.8992 19.8281C14.8778 19.8708 14.8445 19.9065 14.8034 19.9311C13.9516 20.5347 13.103 21.1402 12.2576 21.7478C12.22 21.7743 12.1861 21.8044 12.1364 21.8466L12.3061 21.9009C13.3099 22.2059 14.3137 22.5036 15.3163 22.817C15.35 22.8295 15.3808 22.8486 15.4068 22.8733C15.4329 22.8979 15.4536 22.9276 15.4678 22.9605C15.6411 23.48 15.8048 24.0044 15.9709 24.5276C16.137 25.0508 16.2958 25.5836 16.4692 26.1272ZM28.3837 16.5968L26.981 17.953L30.0858 21.2547L31.4957 19.9287C30.4507 18.8161 29.4214 17.7119 28.3837 16.5968ZM22.0106 13.2517L25.1165 16.5534L26.5252 15.2274L23.4169 11.8955L22.0106 13.2517ZM17.0401 8.59014L20.1097 11.8979L21.5863 10.6334L18.4719 7.34128L17.0401 8.59014Z" />
</svg>
`,
			},
			{
				title: "Perfil del Ciudadano",
				to: { name: "PerfilUsuarioPage" },
				icon: `<svg width="29" height="34" viewBox="0 0 29 34" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M0.0486021 34C0.00285897 33.9665 0 33.9609 0 33.9107C0 33.3835 0.0257303 32.8478 0.0285893 32.3178C0.0343072 31.1628 0.0714735 30.2087 0.317343 29.0677C1.28938 24.5371 4.71726 20.6901 9.17721 19.1306C12.262 20.5729 15.8786 20.5757 18.9605 19.125C23.492 20.7235 26.9398 24.6627 27.8576 29.2853C28.1492 30.7499 28.0548 31.9523 28.1006 33.4114C28.1063 33.5983 28.2349 33.8466 28.0806 33.9972H0.0486021V34Z" />
<path d="M13.844 0.0156558C20.9259 -0.393171 25.6982 7.28652 22.2027 13.4871C19.0703 19.0374 11.2252 19.6734 7.26998 14.6511C2.73314 8.8906 6.56066 0.435839 13.844 0.0156558Z"/>
</svg>
`,
			},
			{
				title: "Ruta de Atención",
				to: { name: "RutaacionPage" },
				icon: `<svg width="37" height="30" viewBox="0 0 37 30" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M36.0716 8.45155C35.9054 9.12177 35.8181 9.8256 35.5524 10.4519C35.2438 11.2004 34.8424 11.9067 34.3578 12.5541C32.4869 14.9811 30.5659 17.3689 28.6626 19.7716C28.6134 19.8341 28.5595 19.8939 28.4889 19.9751C28.4081 19.8817 28.3393 19.807 28.2762 19.7268C26.2911 17.2064 24.2307 14.7496 22.3366 12.1658C19.1235 7.77853 21.5006 1.44315 26.9729 0.288469C31.0676 -0.574045 35.0099 2.06204 35.9137 6.18138C35.9769 6.46702 36.0224 6.75639 36.0754 7.0439L36.0716 8.45155ZM28.4759 16.3859C28.5465 16.3075 28.5799 16.2748 28.6087 16.2384C29.9919 14.4882 31.3899 12.7501 32.7535 10.984C33.6908 9.77052 33.9983 8.37781 33.7642 6.86C33.2998 3.85054 30.2529 1.77827 27.3249 2.48583C23.3863 3.43795 21.8332 7.97175 24.3524 11.1726C25.2813 12.3534 26.2177 13.5296 27.1503 14.7076L28.4759 16.3859Z" />
<path d="M7.59437 19.8501C6.6518 18.6623 5.73991 17.5193 4.83173 16.3679C3.70325 14.9387 2.53202 13.5449 1.46117 12.0783C-1.79227 7.64054 0.670119 1.28592 6.05317 0.160622C10.9501 -0.864918 15.5411 3.16359 15.1684 8.16357C15.0657 9.68639 14.501 11.1413 13.55 12.3329C11.6004 14.7998 9.64837 17.2642 7.69383 19.7261L7.59437 19.8501ZM7.58786 16.2346C7.62753 16.2002 7.66539 16.1638 7.70127 16.1255C9.07887 14.3877 10.4648 12.6564 11.8294 10.9046C12.7887 9.67391 13.115 8.26985 12.8761 6.72688C12.4113 3.72671 9.35494 1.65884 6.42499 2.36926C2.48647 3.32768 0.93876 7.85311 3.46157 11.0519C4.75675 12.6921 6.05503 14.3296 7.3564 15.9642C7.42705 16.0509 7.50327 16.1357 7.58786 16.2346Z" />
<path d="M10.8742 26.307C10.8925 28.1352 9.40994 29.6718 7.60985 29.6887C5.80975 29.7055 4.33362 28.1886 4.31532 26.337C4.29885 24.505 5.77956 22.9721 7.57965 22.9571C9.37974 22.9421 10.8559 24.4535 10.8742 26.307ZM7.58605 27.432C7.80007 27.4316 8.00921 27.3664 8.18721 27.2447C8.36521 27.123 8.50415 26.9501 8.58657 26.7477C8.669 26.5454 8.69124 26.3226 8.65051 26.1074C8.60978 25.8921 8.50789 25.694 8.35763 25.5378C8.20737 25.3817 8.01544 25.2745 7.80593 25.2297C7.59642 25.185 7.37867 25.2046 7.18001 25.2862C6.98134 25.3677 6.81062 25.5076 6.68928 25.6882C6.56793 25.8688 6.50137 26.0821 6.49794 26.3013C6.49599 26.5992 6.60945 26.8858 6.81344 27.0981C7.01742 27.3104 7.29527 27.4312 7.58605 27.4339V27.432Z" />
<path d="M31.7584 26.499C31.6971 28.3794 30.2023 29.8736 28.4293 29.8117C26.604 29.7508 25.144 28.2041 25.2026 26.394C25.2649 24.5136 26.7542 23.0315 28.5327 23.0831C30.3534 23.1346 31.8161 24.6842 31.7584 26.499ZM28.4888 27.5582C28.7028 27.5541 28.9109 27.4854 29.0869 27.3607C29.263 27.2359 29.3991 27.0607 29.4782 26.857C29.5573 26.6533 29.5759 26.4302 29.5317 26.2157C29.4875 26.0012 29.3823 25.8049 29.2295 25.6514C29.0767 25.4979 28.883 25.394 28.6727 25.3528C28.4625 25.3117 28.245 25.335 28.0477 25.4199C27.8503 25.5049 27.6819 25.6476 27.5635 25.8302C27.4451 26.0129 27.382 26.2272 27.3821 26.4465C27.3855 26.744 27.5038 27.028 27.7112 27.2364C27.9187 27.4447 28.1982 27.5605 28.4888 27.5582Z" />
<path d="M12.5339 25.2911L15.4496 25.263L15.4511 27.4862L12.5362 27.5145L12.5339 25.2911Z" />
<path d="M16.5704 25.2514L19.4803 25.2633L19.5056 27.3529L16.5942 27.3443L16.5704 25.2514Z" />
<path d="M23.5432 25.2635L23.5425 27.4815L20.6228 27.5137L20.6237 25.2948L23.5432 25.2635Z" />
<path d="M31.0696 7.72719C31.0597 8.41122 30.7827 9.06425 30.2976 9.54668C29.8126 10.0291 29.1581 10.3027 28.474 10.3089C27.065 10.3033 25.8831 9.11492 25.8914 7.71329C25.8997 6.31166 27.0863 5.12232 28.487 5.13066C29.1713 5.14056 29.8245 5.41773 30.3071 5.90293C30.7898 6.38814 31.0634 7.04287 31.0696 7.72719Z" />
<path d="M7.61058 10.1838C6.20951 10.1977 5.016 9.02157 5.0058 7.61099C4.99561 6.20041 6.16688 5.02153 7.57908 5.00577C8.99128 4.99002 10.1672 6.16519 10.1839 7.57948C10.1996 8.97894 9.02278 10.1708 7.61058 10.1838Z" />
</svg>
`,
			},
			{
				title: "Linea de Tiempo",
				to: { name: "LineaTiempoNuevaPage" },
				icon: `<svg width="42" height="16" viewBox="0 0 42 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M6.84757 0.0288487C9.21662 -0.170808 11.5142 0.67091 13.1431 2.39744C13.7018 2.51666 15.1535 2.24805 15.5965 2.46495C15.7679 2.54826 16.4252 3.27075 16.6124 3.46179C17.7126 4.59079 18.75 5.78585 19.8702 6.89617C20.2274 7.37736 20.2617 7.82407 19.8973 8.31531C19.1986 9.2547 17.9798 10.3464 17.1468 11.2269C16.9139 11.4739 16.6824 11.7813 16.4481 12.0255C16.2866 12.195 15.7837 12.7537 15.6265 12.8413C15.2107 13.0769 13.6875 12.8112 13.1431 12.9246C7.83634 18.4389 -1.3055 13.7348 0.156222 6.11047C0.766345 2.92459 3.61263 0.300324 6.84614 0.0274123L6.84757 0.0288487ZM11.5871 3.89271C10.8512 3.12424 10.0425 2.62295 9.00372 2.33854C8.87226 2.22794 9.12803 1.52412 8.55506 1.24115C8.26643 1.09895 7.36339 1.10757 7.02189 1.14204C6.65753 1.17939 6.35318 1.39628 6.30175 1.77836C6.28031 1.9421 6.35176 2.20927 6.2303 2.317C6.16743 2.37302 5.54016 2.56262 5.3787 2.63444C0.789207 4.68702 1.205 11.4739 5.99597 12.9146C11.4299 14.5492 15.4293 7.91025 11.5871 3.89271Z" />
<path d="M24.5811 2.42193C25.0154 2.37022 25.4441 2.43773 25.8771 2.45784C26.12 2.46933 26.44 2.36016 26.6686 2.54833L30.7509 6.8431C31.381 7.63454 31.0124 8.10998 30.4494 8.74342C29.4763 9.83507 28.4161 10.8664 27.4145 11.9322C27.263 12.0931 26.6929 12.8055 26.5543 12.85C26.2443 12.9376 25.9528 12.8586 25.6399 12.8687C25.2041 12.8845 24.8126 12.8687 24.3839 12.8687C22.8922 12.8644 21.399 12.8816 19.9073 12.8644L19.8544 12.7768L24.0324 8.34268C24.4468 7.76525 24.3467 7.29268 23.9167 6.76984L19.833 2.52391C19.8773 2.4564 19.923 2.45927 19.993 2.45065C21.429 2.29265 23.1251 2.60147 24.5825 2.42049L24.5811 2.42193Z"/>
<path d="M35.2161 2.42606C35.6348 2.42319 36.052 2.41457 36.4664 2.40595C36.7293 2.40164 37.2794 2.37292 37.4966 2.49932L41.6703 6.84292C42.3461 7.69757 41.866 8.18307 41.2759 8.83662C40.2971 9.91821 39.2741 10.9969 38.2667 12.0512C38.1367 12.1862 37.5737 12.7938 37.4694 12.8455C37.2451 12.9547 36.6878 12.9231 36.4221 12.9174C36.0234 12.9102 35.619 12.903 35.2161 12.9001C33.7544 12.8915 32.2898 12.8513 30.8281 12.8642L30.7752 12.7766L34.9518 8.3425C35.4447 7.70044 35.2118 7.22357 34.7432 6.67774L30.7538 2.52661L30.9138 2.45335C32.3484 2.48352 33.7844 2.43468 35.2175 2.42606H35.2161Z" />
<path d="M10.0168 4.8594C10.8184 4.70427 11.1885 5.74277 10.4926 6.18231L8.32503 7.56985L8.29074 11.2412C8.16642 12.0456 7.02191 12.0083 6.90617 11.155C6.98047 9.88242 6.79329 8.47189 6.90045 7.2165C6.92903 6.88039 7.01762 6.72382 7.2791 6.51698C7.73491 6.15502 9.16805 5.24579 9.68816 4.99729C9.77103 4.95708 9.93821 4.8752 10.0168 4.8594Z" />
</svg>
`,
			},
		],
	},
	{
		title: "Mapa",
		to: { name: "DepartamentosPage" },
		icon: `<svg width="36" height="34" viewBox="0 0 36 34" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M26.7985 15.1382L30.9386 13.1449C32.4915 12.8222 32.4844 14.5829 32.7069 15.6578C33.5638 19.8199 34.3213 24.0293 35.0457 28.208C35.0362 28.5948 34.7521 28.8273 34.4775 29.0527L24.0076 33.5256L23.2501 33.4805L11.3789 29.2924L1.41319 33.5161C0.677005 33.6561 0.194106 33.3761 0 32.6595C0.733816 27.8497 1.81324 23.0636 2.69382 18.268C2.79324 17.9809 3.02285 17.746 3.27377 17.5822L8.30396 15.1382C7.76425 14.0609 7.34527 12.8744 7.1985 11.6666C6.49073 5.83883 10.9717 0.40019 16.8115 0.0229018C24.8574 -0.496759 30.4794 7.92697 26.8032 15.1382H26.7985ZM17.4317 6.49138C13.1708 6.49138 13.4075 10.5253 14.5911 13.8473L17.6684 14.3219L20.2723 13.61C21.2191 11.2371 22.8974 6.49138 17.4317 6.49138ZM29.5042 16.9321L24.4716 18.7236L23.2501 20.3324L24.2964 29.9829L25.0066 29.7456L31.3979 27.1354L29.5042 16.9321ZM3.22879 30.4575L9.85681 27.3727L10.8037 18.8304L9.41652 17.0341L4.69879 19.3856L3.22879 30.4575ZM21.9695 22.1382L18.5158 26.7558C18.0803 27.368 17.3062 27.4771 16.7405 26.9693L13.1708 21.9127L12.9341 26.8958L22.8761 30.2178L21.9695 22.1358V22.1382Z" />
</svg>
`,
		submenuOpen: false,
		submenu: [],
	},
	{
		title: "Cargar Archivo",
		to: { name: "SubirFicheroPage" },
		icon: `<svg width="34" height="25" viewBox="0 0 34 25" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M22.6667 12.9925C22.6667 12.8277 22.6135 12.6924 22.5073 12.5865L16.274 6.37267C16.1677 6.26675 16.0319 6.21379 15.8667 6.21379C15.7014 6.21379 15.5656 6.26675 15.4594 6.37267L9.24375 12.5688C9.1257 12.71 9.06667 12.8513 9.06667 12.9925C9.06667 13.1572 9.1198 13.2926 9.22605 13.3985C9.3323 13.5044 9.46806 13.5574 9.63333 13.5574H13.6V19.7712C13.6 19.9242 13.6561 20.0566 13.7682 20.1684C13.8804 20.2802 14.0132 20.3361 14.1667 20.3361H17.5667C17.7201 20.3361 17.853 20.2802 17.9651 20.1684C18.0773 20.0566 18.1333 19.9242 18.1333 19.7712V13.5574H22.1C22.2535 13.5574 22.3863 13.5015 22.4984 13.3897C22.6106 13.2779 22.6667 13.1455 22.6667 12.9925ZM34 18.0765C34 19.9477 33.3359 21.5453 32.0078 22.8692C30.6797 24.1932 29.0771 24.8552 27.2 24.8552H7.93333C5.74931 24.8552 3.88108 24.0814 2.32864 22.5338C0.776213 20.9863 0 19.1239 0 16.9467C0 15.4168 0.413192 14.0046 1.23958 12.71C2.06597 11.4155 3.1757 10.4446 4.56875 9.79733C4.54514 9.44427 4.53333 9.19124 4.53333 9.03824C4.53333 6.54331 5.41874 4.41321 7.18958 2.64793C8.96041 0.882642 11.0972 0 13.6 0C15.4417 0 17.1269 0.511932 18.6557 1.5358C20.1845 2.55966 21.2972 3.91893 21.9937 5.6136C22.8319 4.88395 23.8118 4.51912 24.9333 4.51912C26.1847 4.51912 27.2531 4.96044 28.1385 5.84308C29.024 6.72573 29.4667 7.79078 29.4667 9.03824C29.4667 9.93266 29.2247 10.7447 28.7406 11.4743C30.2753 11.8392 31.5356 12.6365 32.5214 13.8663C33.5071 15.0961 34 16.4995 34 18.0765Z" />
</svg>
`,
		submenuOpen: false,
		submenu: [],
	},
	{
		title: "Generar Reportes",
		to: { name: "FormatodeReportesPage" },
		icon: `<svg width="34" height="30" viewBox="0 0 34 30" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path d="M2.125 0C0.935 0 0 0.935 0 2.125C0 3.315 0.935 4.25 2.125 4.25C3.315 4.25 4.25 3.315 4.25 2.125C4.25 0.935 3.315 0 2.125 0ZM8.5 0V4.25H34V0H8.5ZM2.125 8.5C0.935 8.5 0 9.435 0 10.625C0 11.815 0.935 12.75 2.125 12.75C3.315 12.75 4.25 11.815 4.25 10.625C4.25 9.435 3.315 8.5 2.125 8.5ZM8.5 8.5V12.75H34V8.5H8.5ZM2.125 17C0.935 17 0 17.935 0 19.125C0 20.315 0.935 21.25 2.125 21.25C3.315 21.25 4.25 20.315 4.25 19.125C4.25 17.935 3.315 17 2.125 17ZM8.5 17V21.25H34V17H8.5ZM2.125 25.5C0.935 25.5 0 26.435 0 27.625C0 28.815 0.935 29.75 2.125 29.75C3.315 29.75 4.25 28.815 4.25 27.625C4.25 26.435 3.315 25.5 2.125 25.5ZM8.5 25.5V29.75H34V25.5H8.5Z" />
</svg>
`,
		submenuOpen: false,
		submenu: [],
	},
	{
		title: "Lineas de Atención",
		to: { name: "LineasAtencionPage" },
		icon: `<svg width="34" height="32" viewBox="0 0 34 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
 <path d="M31.5812 11.9827C31.6204 12.0333 32.4149 12.4531 32.6439 12.6582C34.4686 14.2913 34.4502 17.3829 32.5989 18.9845C32.3682 19.1844 31.7011 19.5327 31.6062 19.6898C31.373 20.0721 31.0441 21.5655 30.7992 22.1608C29.0711 26.3661 25.4126 29.7745 21.2144 31.0558C20.1476 31.3813 19.1657 31.4258 18.1322 31.6659C17.3777 31.8413 17.2786 32.1983 16.3225 31.8588C14.4529 31.1945 15.4131 28.8824 17.4243 29.2202C17.8016 29.2839 18.1156 29.6043 18.442 29.6383C20.5149 29.8591 24.3841 27.5557 25.8981 26.1016C36.862 15.5674 25.2427 -3.31018 11.409 3.14789C5.33783 5.98197 2.2731 13.2884 4.16024 19.9464C0.591663 20.1672 -1.37459 15.591 1.11716 12.8738C1.35368 12.6155 2.04324 12.2463 2.16483 12.0516C2.34888 11.7584 2.52461 10.7572 2.68201 10.3243C7.52311 -3.03437 25.4043 -3.5668 30.7992 9.52915C30.9674 9.93851 31.5046 11.8814 31.5812 11.9827Z"/>
 <path fill-rule="evenodd" clip-rule="evenodd" d="M23.9116 20.2701C27.1636 13.9883 22.3947 6.55345 15.6746 7.15084C9.89716 7.66454 6.2817 14.3856 8.9079 19.9724C11.9202 26.3809 20.6574 26.5563 23.9116 20.2701ZM25.7072 21.2721C29.7251 13.5108 23.8361 4.30101 15.5007 5.04199C8.23304 5.6882 3.84993 14.0381 7.07592 20.9008C10.8181 28.8621 21.6679 29.0749 25.7072 21.2721Z"/>
 <path d="M21 19.0709C20.1662 23.0052 12.773 22.9708 12 19C14.9 20.0052 18.0874 20.069 21 19.0709Z"/>
</svg>
`,
		submenuOpen: false,
		submenu: [],
	},
]);
const activeItem = ref(null);
//observar cambios en la ruta actual
watch(
	() => route.name,
	(newRoute) => {
		const currentItem = menuItems.value.find(
			(item) => item.to?.name === newRoute
		);
		if (currentItem) {
			activeItem.value = currentItem.title;
		}
	},
	{ immediate: true } //ejecuta al inicia rpara que el item activo se ajuste
);
//Metodos par estabelecer el elemento activo del Dashboard
const setActive = (item) => {
	if (item.to) {
		router.push(item.to);
	}
	activeItem.value = item.title;
};
//Computed para verificar si un elemento esta activo
const isActive = (item) => {
	return activeItem.value === item.title || route.name === item.to?.name;
};
const hasShownNoSessionToast = ref(false);
const logout = async () => {
	// Verificar si hay un token en el localStorage
	const token = localStorage.getItem("token");
	if (!token) {
		// Si no hay token y el mensaje azul no se ha mostrado, mostrarlo una vez
		if (!hasShownNoSessionToast.value) {
			toast.info("No hay sesión activa.");
			hasShownNoSessionToast.value = true;
		}
		router.push({ name: "LoginPage" });
		return;
	}
	try {
		// Configurar la petición con el token
		const config = {
			headers: {
				Authorization: `Bearer ${token}`,
			},
		};
		// Hacer la petición de logout
		await axios.post("http://localhost:8080/api/auth/logout", {}, config);
		// Limpiar el token
		localStorage.removeItem("token");
		hasShownNoSessionToast.value = false; // Resetear el flag después de cerrar sesión
		// Mostrar mensaje de éxito
		toast.success("Sesión cerrada con éxito.");
		// Redirigir al login
		router.push({ name: "LoginPage" });
	} catch (error) {
		console.error("Error al cerrar sesión:", error);
		// Si ocurre un error en el logout, solo limpiar el token y redirigir al login sin mostrar otro mensaje
		localStorage.removeItem("token");
		router.push({ name: "LoginPage" });
	}
};
</script>
<style scoped>
a {
	text-decoration: none; /* Elimina subrayado en enlaces */
}
</style>
